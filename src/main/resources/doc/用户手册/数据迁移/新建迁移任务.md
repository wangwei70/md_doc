title: 新建迁移任务 updateAt: 2023-09-28 10:00:00 ---

配置源端和目标端信息，选择需要迁移的对象，创建迁移任务。

## 1. 全量+增量迁移

登录成功后，点击数据迁移，点击上方的“新建迁移任务”按钮。

在基本信息页面，填入任务名称、源端数据源、目标端数据源等信息，在迁移配置项下，同时勾选“迁移全量数据”和“迁移增量数据”，点击“下一步”按钮。

在指定数据库迁移范围页面，勾选需要迁移的源模式和对象类型，点击“下一步”按钮。

在选择数据库对象页面，支持对目标模式进行映射，也支持对源对象进行匹配，勾选出需要进行迁移的对象后点击“下一步”按钮。

在预览步骤可以检查源数据库、目标数据库信息，确认需要进行迁移的对象是否有缺失，目标端模式映射是否正确，然后点击“迁移”按钮。

最终，展示迁移任务列表和进度。

## 2. 仅全量迁移

在基本信息页面，仅勾选“迁移全量数据”，其余步骤参考“全量+增量迁移” 。
 
## 3. 仅增量迁移

在基本信息页面，仅勾选“迁移增量数据”，其余步骤参考“全量+增量迁移”。

- 从某个时间点开始

同步起点选择“从某个时间点开始”，勾选具体时间点，AntCDC会选择时间点后的数据进行迁移。

- 从日志偏移量开始

同步起点选择“从日志偏移量开始”，填入与源端数据库相对应的偏移量信息，AntCDC会根据偏移量开始进行迁移。
 
        1. AntDB-T取日志偏移量

可以使用pg_waldump工具读取偏移量所在的wal日志文件，找到对应操作的LSN，然后填入“偏移量”一栏。

		2. MySQL取日志偏移量

将如下返回值按照“File/Position”的格式填入“偏移量”一栏：

`show binary logs; --获取File值，即Log_name列`

`show binlog events in '【File，填入上一条语句的查询结果】' from 1; --获取需要的Position值，即Pos列`

例如：binlog.000013/11067。

        3. Oracle取日志偏移量

使用如下几种方法中的一种，将获取的SCN填入“偏移量”一栏：

`select dbms_flashback.get_system_change_number from dual; --获取当前日志偏移量`

`select current_scn from v$database; --获取当前日志偏移量`

`SELECT TIMESTAMP_TO_SCN(TO_TIMESTAMP('【偏移量对应时间点】','YYYY-MM-DD HH24:MI:SS.ff')) FROM dual; --获取某个时间点附近的近似日志偏移量`

- 从当前位置开始

同步起点选择“从当前位置开始”，AntCDC会从数据库当前最新的数据进行迁移。
